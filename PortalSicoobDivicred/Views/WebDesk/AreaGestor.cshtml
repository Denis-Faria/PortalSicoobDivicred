@model PortalSicoobDivicred.Models.Categoria
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript" src="@Url.Content("~/Assets/js/jquery-time-duration-picker.js")"></script>
<script>
    $(document).ready(function () {
        $("#TabGestaoWebDesk").tabs();
    });

    $(function () {
        $('#TempoCategoria').timeDurationPicker({
            defaultValue: function () {
                return $('#seconds').val();
            },
            onSelect: function (element, seconds, duration) {
                $('#seconds').val(seconds);
                $('#TempoCategoria').val(duration);
            }
        });
    });
    function Buscar() {
        $("#ListaCategorias").empty();
        $.ajax(
            {
                type: 'Post',
                url: '/Webdesk/BuscarCategoria',
                dataType: 'html',
                cache: true,
                async: true,
                data: { "DescricaoCategoria": $("#BuscaCategoria").val() },
                success: function (data) {
                    $("#ListaCategorias").append(data);

                }
            });

    }


</script>
<body>
    @if(TempData["Mensagem"] != null)
    {
        @Html.Label( "" )
        <script>

        iziToast.success({
            title: 'Sucesso',
            position: "center",
            message: '@TempData["Mensagem"]'
        });

        </script>
    }
    <br />
    <div id="Bread">
        <nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs">
            <ul>
                <li>
                    <a href="@Url.Action("Principal", "Principal")">
                        <span class="icon is-small">
                            <i class="fa fa-home"></i>
                        </span><span>DashBoard</span>
                    </a>
                </li>
                <li>
                    <a href="@Url.Action("Chamados")">
                        <span class="icon is-small">
                            <i class="fas fa-tasks"></i>
                        </span><span>WebDesk</span>
                    </a>
                </li>
                <li class="is-active">
                    <a href="#" aria-current="page">
                        <span class="icon is-small">
                            <i class="fas fa-users-cog" aria-hidden="true"></i>
                        </span><span>Área da Gestão</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
    <br />
    <div id="TabGestaoWebDesk">
        <div class="tabs is-boxed is-centered">
            <ul>
                <li id="AbaCategorias" class="is-active">
                    <a href="#Categorias" onclick="javascript:$('#AbaIndicadores').removeClass();$('#AbaFormularios').removeClass();$('#AbaCategorias').addClass('is-active');">
                        <span class="icon is-small">
                            <i class="fas fa-window-restore" aria-hidden="true"></i>
                        </span>
                        <span>Categorias do Meu Setor</span>
                    </a>
                </li>
                <li id="AbaFormularios">
                    <a href="#Formularios" onclick="javascript:$('#AbaIndicadores').removeClass();$('#AbaCategorias').removeClass();$('#AbaFormularios').addClass('is-active');">
                        <span class="icon is-small">
                            <i class="fas fa-project-diagram"></i>
                        </span>
                        <span>Formulários do Meu Setor</span>
                    </a>
                </li>
                <li id="AbaIndicadores">
                    <a href="#Indicadores" onclick="javascript:$('#AbaCategorias').removeClass();$('#AbaFormularios').removeClass();$('#AbaIndicadores').addClass('is-active');">
                        <span class="icon is-small">
                            <i class="far fa-chart-bar"></i>
                        </span>
                        <span>Indicadores do Meu Setor</span>
                    </a>
                </li>

            </ul>
        </div>
        <div id="Categorias">

            <div class="column is-12">
                <div class="field">
                    <p class="control">
                        <button class="button is-primary modal-button" id="NovaCategoria" onclick="javascript:$('#ModalCategoria').removeClass();$('#ModalCategoria').addClass('modal is-active');void(0);" data-target="#ModalCategoria" data-vivaldi-spatnav-clickable="1" onmouseleave="$('#NovaCategoria').removeClass('animated pulse')" onmouseover="$('#NovaCategoria').addClass('animated pulse');" data-balloon="Clique para editar um categoria." data-balloon-pos="down">
                            <span class="icon is-small">
                                <i class="fas fa-plus-square" aria-hidden="true"></i>
                            </span>
                            <span>Editar Categoria</span>
                        </button>
                    </p>
                </div>
            </div>


            @using(Html.BeginForm( "CadastrarCategoria", "Webdesk", FormMethod.Post ))
            {
                <div class="field is-grouped">
                    <div class="column is-6">
                        <p class="control">
                            <label class="label">Descrição Categoria</label>
                            @Html.TextBoxFor( m => m.DescricaoCategoria, null, new { @class = "input" } )
                            @Html.ValidationMessageFor( m => m.DescricaoCategoria, null, new { style = "color:red" } )
                        </p>
                    </div>

                    <div class="column is-6">

                        <p class="control">
                            <label class="label">Tempo de Atendimento Categoria</label>
                            @Html.TextBoxFor( m => m.TempoCategoria, null, new { @class = "input", id = "TempoCategoria", autocomplete = "off" } )
                            <input type="hidden" name="seconds" value="12345" name="Valor" id="seconds" />
                            @Html.ValidationMessageFor( m => m.TempoCategoria, null, new { style = "color:red" } )
                        </p>
                    </div>
                </div>
                <br />

                <div class="column is-12">
                    <div class="field is-right">
                        <div class="control ">
                            <button type="submit" class="button is-success " id="CadastroCategoria" onmouseleave="$('#CadastroCategoria').removeClass('animated pulse')" onmouseover="$('#CadastroCategoria').addClass('animated pulse');" data-balloon="Clique para cadastrar uma categoria." data-balloon-pos="down">
                                <span class="icon is-small">
                                    <i class="fas fa-save" aria-hidden="true"></i>
                                </span>
                                <span class="name">Cadastrar Categoria</span>
                            </button>
                        </div>
                    </div>

                </div>
            }
        </div>
        <div id="Formularios">
            <div class="columns">
                <div class="column is-12">
                    <div class="field">
                        <p class="control">
                            <button class="button is-primary modal-button" id="NovoFormulario" onclick="javascript:$('#ModalFormulario').removeClass();$('#ModalFormulario').addClass('modal is-active');void(0);" data-target="#ModalFormulario" data-vivaldi-spatnav-clickable="1" onmouseleave="$('#NovaFormulario').removeClass('animated pulse')" onmouseover="$('#NovaFormulario').addClass('animated pulse');" data-balloon="Clique para criar um novo formulário." data-balloon-pos="down">
                                <span class="icon is-small">
                                    <i class="fas fa-plus-square" aria-hidden="true"></i>
                                </span>
                                <span>Cadastrar Formulário</span>
                            </button>
                        </p>
                    </div>
                </div>
            </div>
            <div>

            </div>
        </div>
        <div id="Indicadores">

        </div>
    </div>

    <script src='@Url.Content("~/Scripts/jquery.validate.js")' type="text/javascript">
    </script>
    <script src='@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")' type="text/javascript"></script>

        <div id="ModalFormulario" class="modal">
            <div class="modal-background"></div>
            <div class="modal-card">
                <header class="modal-card-head">
                    <p class="modal-card-title">Cadastrar Formulário</p>
                    <a href="javascript:$('#ModalFormulario').removeClass();$('#ModalFormulario').addClass('modal');void(0);" class="delete"></a>
                </header>
                <section class="modal-card-body">
                    <div class="content">
                        @Html.Action( "FormularioSetor" )
                    </div>
                </section>
                <footer class="modal-card-foot">
                    <button type="submit" id="SalvaFormulario" class="button is-success">Cadastrar Formulário</button>
                    <a class="button" href="javascript:$('#ModalFormulario').removeClass();$('#ModalFormulario').addClass('modal');void(0);">Cancelar</a>
                </footer>
            </div>
        </div>


    <script src='@Url.Content("~/Scripts/jquery.validate.js")' type="text/javascript">
    </script>
    <script src='@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")' type="text/javascript"></script>
    @using(Html.BeginForm( "EditarCategoria", "Webdesk", FormMethod.Post ))
    {
        <div id="ModalCategoria" class="modal">
            <div class="modal-background"></div>
            <div class="modal-card">
                <header class="modal-card-head">
                    <p class="modal-card-title">Editar Categoria</p>
                    <a href="javascript:$('#ModalCategoria').removeClass();$('#ModalCategoria').addClass('modal');void(0);" class="delete"></a>
                </header>
                <section class="modal-card-body">
                    <div class="content">

                        <div class="field has-addons">
                            <div class="control has-icons-left is-expanded">
                                <input id="BuscaCategoria" class="input is-fullwidth" type="text" placeholder="Busque uma categoria.">
                                <span class="icon is-small is-left">
                                    <i class="fas fa-search"></i>
                                </span>
                            </div>
                            <div class="control">
                                <a href="Javascript:Buscar();void(0);" class="button is-success">
                                    Procurar
                                </a>
                            </div>
                        </div>
                        <ul id="ListaCategorias"></ul>
                    </div>
                    <hr />
                    <div id="EdicaoCategoria" hidden>

                        <br />
                    </div>
                </section>
                <footer class="modal-card-foot">
                    <button type="submit" id="SalvaCategoria" disabled class="button is-success">Salvar Categoria</button>
                    <a class="button" href="javascript:$('#ModalCategoria').removeClass();$('#ModalCategoria').addClass('modal');void(0);">Cancelar</a>
                </footer>
            </div>
        </div>
    }
</body>

